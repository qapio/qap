module com.qapio
import "Qapi.pkl"

typealias Stage = Qapi.Stage
typealias FlowStage = Qapi.FlowStage


function Tick(interval: Int): Stage =
  From(new Stage {
    Type = "Source.Tick"
    Props = new Dynamic {
      Interval = interval
    }
  })

function From(stage: Stage): Stage =
  if (stage is FlowStage)
    stage
     else
    new FlowStage {
      Kind = "Flow"
      Type = stage.Type
      Props = stage.Props
    }
